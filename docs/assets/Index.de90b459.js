import{G as B,w as D}from"./common.cb48d4fa.js";import{d as S}from"./deepCopyObject.d99c61b5.js";import{_ as O,r as C,t as L,o as P,a as b,b as m,c as T,d as A,w as N,u as w,F as I,e as k,f as R,g as f,h as q,i as y,n as E}from"./index.b04d2ea2.js";const U=[{AreaId:1,AreaName:"\u8499\u5FB7"},{AreaId:2,AreaName:"\u7483\u6708"},{AreaId:3,AreaName:"\u7A3B\u59BB"},{AreaId:4,AreaName:"\u987B\u5F25"},{AreaId:5,AreaName:"\u67AB\u4E39"},{AreaId:6,AreaName:"\u7EB3\u5854"},{AreaId:7,AreaName:"\u81F3\u51AC"},{AreaId:8,AreaName:"\u51EF\u745E\u4E9A"},{AreaId:9,AreaName:"\u5929\u7A7A\u5C9B"},{AreaId:10,AreaName:"\u6DF1\u6E0A"}],v=[{id:"001",Name:"\u7A7A",Talent:[],header:""},{id:"002",Name:"\u8367",Talent:[],header:""},{id:"003",Name:"\u5B89\u67CF",Talent:1,header:"header/\u5B89\u67CF.png"},{id:"004",Name:"\u4E3D\u838E",Talent:3,header:"header/\u4E3D\u838E.png"},{id:"005",Name:"\u51EF\u4E9A",Talent:3,header:"header/\u51EF\u4E9A.png"},{id:"006",Name:"\u8BFA\u827E\u5C14",Talent:2,header:"header/\u8BFA\u827E\u5C14.png"},{id:"007",Name:"\u9999\u83F1",Talent:5,header:"header/\u9999\u83F1.png"},{id:"008",Name:"\u82AD\u82AD\u62C9",Talent:1,header:"header/\u82AD\u82AD\u62C9.png"},{id:"009",Name:"\u884C\u79CB",Talent:6,header:"header/\u884C\u79CB.png"},{id:"010",Name:"\u7802\u7CD6",Talent:1,header:"header/\u7802\u7CD6.png"},{id:"011",Name:"\u5317\u6597",Talent:6,header:"header/\u5317\u6597.png"},{id:"012",Name:"\u96F7\u6CFD",Talent:2,header:"header/\u96F7\u6CFD.png"},{id:"013",Name:"\u73ED\u5C3C\u7279",Talent:2,header:"header/\u73ED\u5C3C\u7279.png"},{id:"014",Name:"\u51DD\u5149",Talent:4,header:"header/\u51DD\u5149.png"},{id:"015",Name:"\u91CD\u4E91",Talent:5,header:"header/\u91CD\u4E91.png"},{id:"016",Name:"\u83F2\u8C22\u5C14",Talent:3,header:"header/\u83F2\u8C22\u5C14.png"},{id:"017",Name:"\u4E03\u4E03",Talent:4,header:"header/\u4E03\u4E03.png"},{id:"018",Name:"\u7434",Talent:2,header:"header/\u7434.png"},{id:"019",Name:"\u8FEA\u5362\u514B",Talent:2,header:"header/\u8FEA\u5362\u514B.png"},{id:"020",Name:"\u523B\u6674",Talent:4,header:"header/\u523B\u6674.png"},{id:"021",Name:"\u83AB\u5A1C",Talent:2,header:"header/\u83AB\u5A1C.png"},{id:"022",Name:"\u6E29\u8FEA",Talent:3,header:"header/\u6E29\u8FEA.png"},{id:"023",Name:"\u53EF\u8389",Talent:1,header:"header/\u53EF\u8389.png"},{id:"024",Name:"\u8FEA\u5965\u5A1C",Talent:1,header:"header/\u8FEA\u5965\u5A1C.png"},{id:"025",Name:"\u8FBE\u8FBE\u5229\u4E9A",Talent:1,header:"header/\u8FBE\u8FBE\u5229\u4E9A.png"},{id:"026",Name:"\u8F9B\u7131",Talent:6,header:"header/\u8F9B\u7131.png"},{id:"027",Name:"\u949F\u79BB",Talent:6,header:"header/\u949F\u79BB.png"},{id:"028",Name:"\u963F\u8D1D\u591A",Talent:3,header:"header/\u963F\u8D1D\u591A.png"},{id:"029",Name:"\u7518\u96E8",Talent:5,header:"header/\u7518\u96E8.png"},{id:"030",Name:"\u9B48",Talent:4,header:"header/\u9B48.png"},{id:"031",Name:"\u80E1\u6843",Talent:5,header:"header/\u80E1\u6843.png"},{id:"032",Name:"\u7F57\u838E\u8389\u4E9A",Talent:3,header:"header/\u7F57\u838E\u8389\u4E9A.png"},{id:"033",Name:"\u70DF\u7EEF",Talent:6,header:"header/\u70DF\u7EEF.png"},{id:"034",Name:"\u4F18\u83C8",Talent:2,header:"header/\u4F18\u83C8.png"},{id:"035",Name:"\u67AB\u539F\u4E07\u53F6",Talent:5,header:"header/\u67AB\u539F\u4E07\u53F6.png"},{id:"036",Name:"\u795E\u91CC\u7EEB\u534E",Talent:8,header:"header/\u795E\u91CC\u7EEB\u534E.png"},{id:"037",Name:"\u5BB5\u5BAB",Talent:7,header:"header/\u5BB5\u5BAB.png"},{id:"038",Name:"\u65E9\u67DA",Talent:9,header:"header/\u65E9\u67DA.png"},{id:"039",Name:"\u96F7\u7535\u5C06\u519B",Talent:9,header:"header/\u96F7\u7535\u5C06\u519B.png"},{id:"040",Name:"\u4E5D\u6761\u88DF\u7F57",Talent:8,header:"header/\u4E5D\u6761\u88DF\u7F57.png"},{id:"041",Name:"\u73CA\u745A\u5BAB\u5FC3\u6D77",Talent:7,header:"header/\u73CA\u745A\u5BAB\u5FC3\u6D77.png"},{id:"042",Name:"\u6258\u9A6C",Talent:7,header:"header/\u6258\u9A6C.png"},{id:"043",Name:"\u8352\u6CF7\u4E00\u6597",Talent:8,header:"header/\u8352\u6CF7\u4E00\u6597.png"},{id:"044",Name:"\u4E94\u90CE",Talent:9,header:"header/\u4E94\u90CE.png"},{id:"045",Name:"\u7533\u9E64",Talent:4,header:"header/\u7533\u9E64.png"},{id:"046",Name:"\u4E91\u5807",Talent:5,header:"header/\u4E91\u5807.png"},{id:"047",Name:"\u516B\u91CD\u795E\u5B50",Talent:9,header:"header/\u516B\u91CD\u795E\u5B50.png"},{id:"048",Name:"\u795E\u91CC\u7EEB\u4EBA",Talent:8,header:"header/\u795E\u91CC\u7EEB\u4EBA.png"},{id:"049",Name:"\u591C\u5170",Talent:4,header:"header/\u591C\u5170.png"},{id:"050",Name:"\u4E45\u5C90\u5FCD",Talent:8,header:"header/\u4E45\u5C90\u5FCD.png"},{id:"051",Name:"\u9E7F\u91CE\u9662\u5E73\u85CF",Talent:7,header:"header/\u9E7F\u91CE\u9662\u5E73\u85CF.png"},{id:"052",Name:"\u57C3\u6D1B\u4F0A",Talent:1,header:"header/\u57C3\u6D1B\u4F0A.png"}],W={1:[0,1,4],2:[0,2,5],3:[0,3,6]},x=[{id:1,label:"\u81EA\u7531",areaId:1,weekType:1},{id:2,label:"\u6297\u4E89",areaId:1,weekType:2},{id:3,label:"\u8BD7\u6587",areaId:1,weekType:3},{id:4,label:"\u7E41\u8363",areaId:2,weekType:1},{id:5,label:"\u52E4\u52B3",areaId:2,weekType:2},{id:6,label:"\u9EC4\u91D1",areaId:2,weekType:3},{id:7,label:"\u6D6E\u4E16",areaId:3,weekType:1},{id:8,label:"\u98CE\u96C5",areaId:3,weekType:2},{id:9,label:"\u5929\u5149",areaId:3,weekType:3}],J=r=>new Promise((e,n)=>{let a=new Image;a.src=r,a.onload=()=>{let s=a.naturalWidth,o=a.naturalHeight,i=document.createElement("canvas");i.width=s,i.height=o,i.getContext("2d").drawImage(a,0,0,s,o);let l=i.toDataURL("image/jpeg",1);e(l),a=null,i=null}}),p=(r,e,n=1)=>new Promise((a,s)=>{var o=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;let i;const t=o.open(r,n);t.onsuccess=function(l){i=l.target.result,a(i)},t.onerror=function(l){},t.onupgradeneeded=function(l){i=l.target.result;var c;c=i.createObjectStore(e,{keyPath:"id",autoIncrement:!0}),c.createIndex("id","id",{unique:!0})}}),j=(r,e,n)=>new Promise((a,s)=>{var o=r.transaction([e],"readwrite").objectStore(e).add(n);o.onsuccess=function(i){a("success")},o.onerror=function(i){s("error")}}),K=(r,e,n)=>new Promise((a,s)=>{var o=r.transaction([e]),i=o.objectStore(e),t=i.get(n);t.onerror=function(l){console.log("\u4E8B\u52A1\u5931\u8D25")},t.onsuccess=function(l){console.log("\u4E3B\u952E\u67E5\u8BE2\u7ED3\u679C: ",t.result),a(t.result)}}),V=(r,e,n,a,s,o)=>new Promise((i,t)=>{let l=[],c=0,h=!0;var d=r.transaction(e,"readwrite").objectStore(e);let u;s?u=d.index(s).openCursor(IDBKeyRange.only(o)):u=d.openCursor(),u.onsuccess=function(_){var g=_.target.result;if(n>1&&h){h=!1,g.advance((n-1)*a);return}g?(l.push(g.value),c++,c<a?g.continue():(g=null,console.log("\u5206\u9875\u67E5\u8BE2\u7ED3\u679C",l),i(l))):(console.log("\u5206\u9875\u67E5\u8BE2\u7ED3\u679C",l),i(l))},u.onerror=function(_){}}),F=(r,e,n)=>new Promise((a,s)=>{var o=r.transaction([e],"readwrite").objectStore(e).put(n);o.onsuccess=function(){console.log("\u6570\u636E\u66F4\u65B0\u6210\u529F"),a("\u66F4\u65B0\u6210\u529F")},o.onerror=function(){console.log("\u6570\u636E\u66F4\u65B0\u5931\u8D25")}}),G=(r,e,n)=>new Promise((a,s)=>{var o=r.transaction([e],"readwrite").objectStore(e).delete(n);o.onsuccess=function(){console.log("\u6570\u636E\u5220\u9664\u6210\u529F"),a("\u5220\u9664\u6210\u529F")},o.onerror=function(){console.log("\u6570\u636E\u5220\u9664\u5931\u8D25"),s("\u5220\u9664\u5931\u8D25")}}),H=(r,e,n)=>{p(r,e).then(a=>{Array.isArray(n)?n.forEach(s=>{j(a,e,s)}):j(a,e,item)})},M=r=>{p(r,storeName).then(e=>e.close())},z=(r,e,n)=>p(r,e).then(a=>K(a,e,n)),$=(r,e,n,a)=>p(r,e).then(s=>V(s,e,n,a)),Q=(r,e,n)=>p(r,e).then(a=>F(a,e,n)),X=(r,e,n)=>p(r,e).then(a=>G(a,e,n));var Y={add:H,close:M,edit:Q,searchDataById:z,searchDataByPage:$,deleteById:X};const Z=["onClick"],ee=["src"],ae={__name:"Index",setup(r){const e=C({activeIndex:0,currentRoleList:[]}),n=()=>{e.activeIndex=new Date().getDay()},a=()=>{let t=[],l=Object.entries(W).reduce((h,d)=>(d[1].includes(e.activeIndex)&&h.push(d[0]),h),[]);l.length==1?t=x.filter(h=>h.weekType==Number(l[0])):t=S(x);let c=localStorage.getItem("headerObj");c=c?JSON.parse(c):{},e.currentRoleList=t.map(h=>(h.areaName=U.find(d=>d.AreaId==h.areaId).AreaName,h.role=v.filter(d=>d.Talent==h.id||Array.isArray(d.Talent)).map(d=>(c&&c[d.id]&&(d.headerURL=c[d.id]),d)),h))},s=t=>{e.activeIndex=t,a()};n(),a();const{activeIndex:o,currentRoleList:i}=L(e);return P(()=>{let t=localStorage.getItem("headerObj");t?t=JSON.parse(t):t={},Y.add("DB","headerStore",v),v.filter(l=>l.header).forEach(l=>{t&&Object.prototype.hasOwnProperty.call(t,l.id)||J(l.header).then(c=>{t[l.id]=c,localStorage.setItem("headerObj",JSON.stringify(t))}).catch(c=>{console.log(c)})})}),(t,l)=>{const c=b("el-col"),h=b("el-row");return m(),T(I,null,[A(h,{gutter:20},{default:N(()=>[(m(!0),T(I,null,k(w(D),d=>(m(),q(c,{span:3,key:d.id},{default:N(()=>[y("div",{class:E(["grid-content",d.id===w(o)?"active":""]),onClick:u=>s(d.id)},f(d.label),11,Z)]),_:2},1024))),128))]),_:1}),A(B,{"data-list":w(i),class:"grid",hasHeader:""},{headers:N(d=>[R(f(d.item.areaName)+" "+f(d.item.label),1)]),default:N(d=>[(m(!0),T(I,null,k(d.item.role,u=>(m(),T("div",{key:u.id,class:"role-card"},[y("img",{src:u.headerURL?u.headerURL:u.header},null,8,ee),y("span",null,f(u.Name),1)]))),128))]),_:1},8,["data-list"])],64)}}};var de=O(ae,[["__scopeId","data-v-7f8e86e3"]]);export{de as default};
